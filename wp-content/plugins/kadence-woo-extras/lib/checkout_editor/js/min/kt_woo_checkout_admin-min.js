function openNewFieldForm(e){ktwc_settings.openNewFieldForm(e)}function openEditFieldForm(e,n){ktwc_settings.openEditFieldForm(e,n)}function removeSelectedFields(){ktwc_settings.removeSelectedFields()}function enableSelectedFields(){ktwc_settings.enableDisableSelectedFields(1)}function disableSelectedFields(){ktwc_settings.enableDisableSelectedFields(0)}function fieldTypeChangeListner(e){ktwc_settings.fieldTypeChangeListner(e)}function ktwcSelectAllCheckoutFields(e){ktwc_settings.selectAllCheckoutFields(e)}var ktwc_settings=function($,e,n){function i(e){var n=$(e).find("input[name=fname]").val(),i=$(e).find("select[name=ftype]").val(),t=$(e).find("input[name=flabel]").val(),d=$(e).find("input[name=fplaceholder]").val(),a=$(e).find("input[name=foptions]").val(),l=$(e).find("input[name=fclass]").val(),s=$(e).find("input[name=flabelclass]").val(),f=$(e).find("input[name=frequired]").prop("checked"),o=$(e).find("input[name=fclearRow]").prop("checked"),c=$(e).find("input[name=fenabled]").prop("checked"),p=$(e).find("input[name=fshowinemail]").prop("checked"),r=$(e).find("input[name=fshowinorder]").prop("checked"),u=$(e).find("select[name=fvalidate]").val(),_="";if(""==n?_="Name is required":""==i&&(_="Type is required"),""!=_)return $(e).find(".err_msgs").html(_),!1;f=f?1:0,o=o?1:0,c=c?1:0,p=p?1:0,r=r?1:0,u=u||"";var m=$("#kt_checkout_fields tbody tr").size(),h='<tr class="row_'+m+'">';return h+='<td width="1%" class="sort ui-sortable-handle">',h+='<input type="hidden" name="f_order['+m+']" class="f_order" value="'+m+'" />',h+='<input type="hidden" name="f_name['+m+']" class="f_name" value="" />',h+='<input type="hidden" name="f_name_new['+m+']" class="f_name_new" value="'+n+'" />',h+='<input type="hidden" name="f_type['+m+']" class="f_type" value="'+i+'" />',h+='<input type="hidden" name="f_label['+m+']" class="f_label" value="'+t+'" />',h+='<input type="hidden" name="f_placeholder['+m+']" class="f_placeholder" value="'+d+'" />',h+='<input type="hidden" name="f_options['+m+']" class="f_options" value="'+a+'" />',h+='<input type="hidden" name="f_class['+m+']" class="f_class" value="'+l+'" />',h+='<input type="hidden" name="f_label_class['+m+']" class="f_label_class" value="'+s+'" />',h+='<input type="hidden" name="f_required['+m+']" class="f_required" value="'+f+'" />',h+='<input type="hidden" name="f_clear['+m+']" class="f_clear" value="'+o+'" />',h+='<input type="hidden" name="f_enabled['+m+']" class="f_enabled" value="'+c+'" />',h+='<input type="hidden" name="f_show_in_email['+m+']" class="f_show_in_email" value="'+p+'" />',h+='<input type="hidden" name="f_show_in_order['+m+']" class="f_show_in_order" value="'+r+'" />',h+='<input type="hidden" name="f_validation['+m+']" class="f_validation" value="'+u+'" />',h+='<input type="hidden" name="f_deleted['+m+']" class="f_deleted" value="0" />',h+="</td>",h+='<td ><input type="checkbox" /></td>',h+='<td class="name">'+n+"</td>",h+='<td class="id">'+i+"</td>",h+="<td>"+t+"</td>",h+="<td>"+d+"</td>",h+="<td>"+u+"</td>",h+=1==f?'<td class="status"><span class="status-enabled tips">Yes</span></td>':'<td class="status">-</td>',h+=1==o?'<td class="status"><span class="status-enabled tips">Yes</span></td>':'<td class="status">-</td>',h+=1==c?'<td class="status"><span class="status-enabled tips">Yes</span></td>':'<td class="status">-</td>',h+='<td><button type="button" onclick="openEditFieldForm(this)">Edit</button></td>',h+="</tr>",$("#kt_checkout_fields tbody tr:last").after(h),!0}function t(e){var n=$(e).find("input[name=rowId]").val(),i=$(e).find("input[name=fnameNew]").val(),t=$(e).find("select[name=ftype]").val(),d=$(e).find("input[name=flabel]").val(),a=$(e).find("input[name=fplaceholder]").val(),l=$(e).find("input[name=foptions]").val(),s=$(e).find("input[name=fclass]").val(),f=$(e).find("input[name=flabelclass]").val(),o=$(e).find("input[name=frequired]").prop("checked"),c=$(e).find("input[name=fclearRow]").prop("checked"),p=$(e).find("input[name=fenabled]").prop("checked"),r=$(e).find("input[name=fshowinemail]").prop("checked"),u=$(e).find("input[name=fshowinorder]").prop("checked"),_=$(e).find("select[name=fvalidate]").val(),m="";if(""==i?m="Name is required":""==t&&(m="Type is required"),""!=m)return $(e).find(".err_msgs").html(m),!1;o=o?1:0,c=c?1:0,p=p?1:0,r=r?1:0,u=u?1:0,_=_||"";var h=$("#kt_checkout_fields tbody").find(".row_"+n);return h.find(".f_name").val(i),h.find(".f_type").val(t),h.find(".f_label").val(d),h.find(".f_placeholder").val(a),h.find(".f_options").val(l),h.find(".f_class").val(s),h.find(".f_label_class").val(f),h.find(".f_required").val(o),h.find(".f_clear").val(c),h.find(".f_enabled").val(p),h.find(".f_show_in_email").val(r),h.find(".f_show_in_order").val(u),h.find(".f_validation").val(_),h.find(".td_name").html(i),h.find(".td_type").html(t),h.find(".td_label").html(d),h.find(".td_placeholder").html(a),h.find(".td_validate").html(""+_),h.find(".td_required").html(1==o?'<span class="status-enabled tips">Yes</span>':"-"),h.find(".td_clear").html(1==c?'<span class="status-enabled tips">Yes</span>':"-"),h.find(".td_enabled").html(1==p?'<span class="status-enabled tips">Yes</span>':"-"),!0}function d(e){e.find("input[name=fname]").val(""),e.find("input[name=fnameNew]").val(""),e.find("select[name=ftype]").prop("selectedIndex",0),e.find("input[name=flabel]").val(""),e.find("input[name=fplaceholder]").val(""),e.find("input[name=foptions]").val(""),e.find("input[name=fclass]").val(""),e.find("input[name=flabelclass]").val(""),e.find("select[name=fvalidate] option:selected").removeProp("selected"),e.find("input[name=frequired]").prop("checked",!0),e.find("input[name=fclearRow]").prop("checked",!0),e.find("input[name=fenabled]").prop("checked",!0),e.find("input[name=fshowinemail]").prop("checked",!0),e.find("input[name=fshowinorder]").prop("checked",!0)}function a(){$("#kt_checkout_fields tbody tr").each(function(e,n){$("input.f_order",n).val(parseInt($(n).index("#kt_checkout_fields tbody tr")))})}function l(e){e.find(".rowOptions").show(),e.find(".rowPlaceholder").show(),e.find(".rowValidate").show()}return $("#kt_woo_new_field_form").dialog({modal:!0,width:500,resizable:!1,autoOpen:!1,buttons:[{text:"Add New Field",click:function(){i(this)&&$(this).dialog("close")}}]}),$("#kt_woo_edit_field_form").dialog({modal:!0,width:500,resizable:!1,autoOpen:!1,buttons:[{text:"Edit Field",click:function(){t(this)&&$(this).dialog("close")}}]}),$("select.kt-enhanced-multi-select").select2({minimumResultsForSearch:10,allowClear:!0,placeholder:$(this).data("placeholder")}).addClass("enhanced"),$("#kt_checkout_fields tbody").sortable({items:"tr",cursor:"move",axis:"y",handle:"td.sort",scrollSensitivity:40,helper:function(e,n){return n.children().each(function(){$(this).width($(this).width())}),n.css("left","0"),n}}),$("#kt_checkout_fields tbody").on("sortstart",function(e,n){n.item.css("background-color","#f6f6f6")}),$("#kt_checkout_fields tbody").on("sortstop",function(e,n){n.item.removeAttr("style"),a()}),_openNewFieldForm=function e(n){"billing"!=n&&"shipping"!=n&&"additional"!=n||(n+="_");var i=$("#kt_woo_new_field_form");d(i),i.find("input[name=fname]").val(n),i.find("select[name=ftype]").change(),i.find("input[name=fclass]").val("form-row-wide"),$("#kt_woo_new_field_form").dialog("open")},_openEditFieldForm=function e(n,i){var t=$(n).closest("tr"),d=t.find(".f_custom").val(),a=t.find(".f_name").val(),l=t.find(".f_type").val(),s=t.find(".f_label").val(),f=t.find(".f_placeholder").val(),o=t.find(".f_options").val(),c=t.find(".f_class").val(),p=t.find(".f_label_class").val(),r=t.find(".f_required").val(),u=t.find(".f_clear").val(),_=t.find(".f_enabled").val(),m=t.find(".f_validation").val(),h=t.find(".f_show_in_email").val(),v=t.find(".f_show_in_order").val();d=1==d,r=1==r,u=1==u,_=1==_,m=m.split(","),h=1==h,v=1==v,h=1!=d||h,v=1!=d||v;var b=$("#kt_woo_edit_field_form");b.find("input[name=rowId]").val(i),b.find("input[name=fname]").val(a),b.find("input[name=fnameNew]").val(a),b.find("select[name=ftype]").val(l),b.find("input[name=flabel]").val(s),b.find("input[name=fplaceholder]").val(f),b.find("input[name=foptions]").val(o),b.find("input[name=fclass]").val(c),b.find("input[name=flabelclass]").val(p),b.find("select[name=fvalidate]").val(m).trigger("change"),b.find("input[name=frequired]").prop("checked",r),b.find("input[name=fclearRow]").prop("checked",u),b.find("input[name=fenabled]").prop("checked",_),b.find("input[name=fshowinemail]").prop("checked",h),b.find("input[name=fshowinorder]").prop("checked",v),b.find("select[name=ftype]").change(),$("#kt_woo_edit_field_form").dialog("open"),0==d?(b.find("input[name=fnameNew]").prop("disabled",!0),b.find("select[name=ftype]").prop("disabled",!0),b.find("input[name=fshowinemail]").prop("disabled",!0),b.find("input[name=fshowinorder]").prop("disabled",!0),b.find("input[name=flabel]").focus()):(b.find("input[name=fnameNew]").prop("disabled",!1),b.find("select[name=ftype]").prop("disabled",!1),b.find("input[name=fshowinemail]").prop("disabled",!1),b.find("input[name=fshowinorder]").prop("disabled",!1))},_removeSelectedFields=function e(){$("#kt_checkout_fields tbody tr").removeClass("strikeout"),$("#kt_checkout_fields tbody input:checkbox[name=select_field]:checked").each(function(){var e=$(this).closest("tr");e.hasClass("strikeout")||e.addClass("strikeout"),e.find(".f_deleted").val(1),e.find(".f_edit_btn").prop("disabled",!0)})},_enableDisableSelectedFields=function e(n){$("#kt_checkout_fields tbody input:checkbox[name=select_field]:checked").each(function(){var e=$(this).closest("tr");0==n?e.hasClass("kt-woo-disabled")||e.addClass("kt-woo-disabled"):e.removeClass("kt-woo-disabled"),e.find(".f_edit_btn").prop("disabled",1!=n),e.find(".td_enabled").html(1==n?'<span class="status-enabled tips">Yes</span>':"-"),e.find(".f_enabled").val(n)})},_fieldTypeChangeListner=function e(n){var i=$(n).val(),t=$(n).closest("form");l(t),"select"===i||"radio"===i?(t.find(".rowPlaceholder").hide(),t.find(".rowValidate").hide()):t.find(".rowOptions").hide()},_selectAllCheckoutFields=function e(n){var i=$(n).prop("checked");$("#kt_checkout_fields tbody input:checkbox[name=select_field]").prop("checked",i)},{openNewFieldForm:_openNewFieldForm,openEditFieldForm:_openEditFieldForm,removeSelectedFields:_removeSelectedFields,enableDisableSelectedFields:_enableDisableSelectedFields,fieldTypeChangeListner:_fieldTypeChangeListner,selectAllCheckoutFields:_selectAllCheckoutFields}}(window.jQuery,window,document);